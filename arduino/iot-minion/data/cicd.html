<!DOCTYPE html><html lang="en"><head> <title>CI / CD </title> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link href='minion-ico' rel='icon' type='image/x-icon'/> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"> </script> <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script> <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> <script>var time=new Date().getTime(); var refreshMaxTime=50000; var refreshTime=5000; $(document.body).bind("mousemove keypress", function(e){time=new Date().getTime();}); function refresh(){if (new Date().getTime() - time >=refreshMaxTime){window.location.reload(true);}else{setTimeout(refresh, refreshTime);}}setTimeout(refresh, refreshTime); </script> <style>table{width: 100%}td:nth-child(odd){width: 5%}</style></head><body style="text-align:center;" onload="loadList()"> <h1 style="color:orange;"> DevOps </h1> <p><img src='minion-list' height='128px'/></p><table id="table" class="table table-striped table-dark" width="100%"></table> <script>async function getJsonLastValue(){let response=await fetch("https://AIO_SERVER/api/v2/AIO_USERNAME/feeds/list",{method: 'GET', headers:{'Content-Type': 'application/json', 'X-AIO-Key': 'AIO_KEY'},}); let data=await response.json() return JSON.parse(data.last_value);}function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase() + string.slice(1);}async function loadList(){var list=await getJsonLastValue(); if (list.length==0){var table=document.createElement("table"); var theader=table.createTHead(); var row=theader.insertRow(0); var cell=row.insertCell(0); cell.innerHTML="Não existe nenhuma aplicação que tenha quebrado no devops!<p><img src='http://clipart-library.com/images_k/minion-transparent-background/minion-transparent-background-18.png' height='512px'/></p>"; var el=document.getElementById("table"); el.innerHTML=""; el.appendChild(table);}else{var cols=[]; for (var i=0; i < list.length; i++){for (var k in list[i]){if (cols.indexOf(k)===-1){cols.push(k);}}}var table=document.createElement("table"); var theader=table.createTHead(); var row=theader.insertRow(0); for (var i=0; i < cols.length; i++){var cell=row.insertCell(i); if (i==0){cell.innerHTML="#";}else{cell.innerHTML=capitalizeFirstLetter(cols[i]);}cell.className="bg-primary";}var tbody=table.createTBody(); for (var i=0; i < list.length; i++){var trow=tbody.insertRow(i); for (var j=0; j < cols.length; j++){var cell=trow.insertCell(j); cell.innerHTML=list[i][cols[j]];}}var el=document.getElementById("table"); el.innerHTML=""; el.appendChild(table);}}</script></body></html>